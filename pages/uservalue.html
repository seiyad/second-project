<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salary Dashboard</title>
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>

<body>

    <div class="salary-card">
        <h2>Enter Your Salary</h2>

        <div class="input-group">
            <label>Monthly Gross Salary (â‚¹)</label>
            <input type="number" id="monthlySalary" placeholder="e.g. 50000">
        </div>

        <button id="submitBtn">Submit</button>
    </div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAWfXbLyYQKrWfnZPdpo25WOr7n9N4M78c",
        authDomain: "expense-trakker.firebaseapp.com",
        databaseURL: "https://expense-trakker-default-rtdb.firebaseio.com",
        projectId: "expense-trakker",
        storageBucket: "expense-trakker.firebasestorage.app",
        messagingSenderId: "654573857096",
        appId: "1:654573857096:web:a07423978542be8a086b7d"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const submitBtn = document.getElementById("submitBtn");

    
    onAuthStateChanged(auth, (user) => {
        if (!user) {
            
            window.location.href = "../index.html";
            return;
        }

        
        const existingSalary = localStorage.getItem(`monthlySalary_${user.uid}`);
        if (existingSalary) {
            window.location.href = "./dashborard.html";
            return;
        }

        submitBtn.addEventListener("click", function () {
            const salaryInput = document.getElementById("monthlySalary").value;
            const monthlySalary = parseFloat(salaryInput);

            if (isNaN(monthlySalary) || monthlySalary <= 0) {
                alert("Please enter a valid salary amount!");
                return;
            }

            
            localStorage.setItem(`monthlySalary_${user.uid}`, monthlySalary);

            window.location.href = "./dashborard.html";
        });
    });
</script>
</body>
</html>